<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.7 [en] (X11; I; Linux 2.4.0-test6 i586) [Netscape]">
   <title>TI-89 Link Protocol Guide - Screenshots</title>
</head>
<body bgcolor="#FFFFE8">
<b>TI-89 Link Protocol Guide</b> - Screenshots 
<center>
<h2>

<hr ALIGN="CENTER">Screenshots</h2></center>
The TI-89's screenshot ability is "silent," which means that the calculator
does not need to be put in a special mode. Screenshots can be taken any
time the calculator is ready to accept a keypress.
<p>The protocol used for getting a screenshot is shown below. For information
on packet formats, <a href="packet.html">click here</a>.
<table BORDER CELLSPACING=0 WIDTH="92%" BGCOLOR="#FFFFFF" >
<tr>
<th WIDTH="7%" BGCOLOR="#008800"><font color="#FFFFFF">Step</font></th>

<th COLSPAN="3" BGCOLOR="#008800"><font color="#FFFFFF">Direction</font></th>

<th WIDTH="80%" BGCOLOR="#008800"><font color="#FFFFFF">Packet</font></th>
</tr>

<tr>
<td WIDTH="7%" BGCOLOR="#FFFFFF">
<center>1&nbsp;</center>
</td>

<td ROWSPAN="4">
<center><img SRC="graphics/comp.gif" ALT="Computer" BORDER=0 height=33 width=30 align=BOTTOM></center>
</td>

<td BGCOLOR="#FFFFFF">
<center><img SRC="graphics/right.gif" ALT="===>" BORDER=0 height=13 width=22 align=BOTTOM></center>
</td>

<td ROWSPAN="4" BGCOLOR="#FFFFFF">
<center><img SRC="graphics/calc.gif" ALT="Calculator" BORDER=0 height=35 width=60 align=BOTTOM></center>
</td>

<td WIDTH="80%" BGCOLOR="#FFFFFF">SCR</td>
</tr>

<tr>
<td WIDTH="7%" BGCOLOR="#FFFFFF">
<center>2&nbsp;</center>
</td>

<td BGCOLOR="#FFFFFF">
<center><img SRC="graphics/left.gif" ALT="<===" BORDER=0 height=13 width=22 align=BOTTOM></center>
</td>

<td WIDTH="80%" BGCOLOR="#FFFFFF">ACK</td>
</tr>

<tr>
<td WIDTH="7%" BGCOLOR="#FFFFFF">
<center>3&nbsp;</center>
</td>

<td BGCOLOR="#FFFFFF">
<center><img SRC="graphics/left.gif" ALT="<===" BORDER=0 height=13 width=22 align=BOTTOM></center>
</td>

<td WIDTH="80%" BGCOLOR="#FFFFFF">DATA - Format described below.</td>
</tr>

<tr>
<td WIDTH="7%" BGCOLOR="#FFFFFF">
<center>4&nbsp;</center>
</td>

<td BGCOLOR="#FFFFFF">
<center><img SRC="graphics/right.gif" ALT="===>" BORDER=0 height=13 width=22 align=BOTTOM></center>
</td>

<td WIDTH="80%" BGCOLOR="#FFFFFF">ACK</td>
</tr>
</table>

<p>The data packet contains a 3840-byte monochrome bitmap (1 bit per pixel).
Each bit has a value of 1 if the corresponding pixel is dark or a value
of 0 if the corresponding pixel is light.
<p>The pixel order is left-to-right, then top-to-bottom (See figure below).
<br>Byte 0 defines the first 8 pixels in the left side of the top row of
the screen. Bytes 1-29 define the rest of the first row, bytes 30-59 define
the second row, etc.
<p><u>Example:</u>
<table BORDER=0 CELLSPACING=0 WIDTH="100%" >
<tr>
<td BGCOLOR="#CCFFCC">PC:</td>

<td WIDTH="50%" BGCOLOR="#CCFFCC"><b><tt>08 56 00 00</tt></b></td>

<td WIDTH="50%" BGCOLOR="#CCFFCC"><i>Screenshot request</i></td>
</tr>

<tr>
<td BGCOLOR="#FFCCCC">TI:</td>

<td WIDTH="50%" BGCOLOR="#FFCCCC"><b><tt>98 56 00 00</tt></b></td>

<td WIDTH="50%" BGCOLOR="#FFCCCC"><i>Acknowledgement of request</i></td>
</tr>

<tr>
<td BGCOLOR="#FFCCCC">&nbsp;</td>

<td WIDTH="50%" BGCOLOR="#FFCCCC"><b><tt>98 15 00 0F </tt></b>&lt;3840
bytes plus 2 byte checksum></td>

<td WIDTH="50%" BGCOLOR="#FFCCCC"><i>Screen data</i></td>
</tr>

<tr>
<td BGCOLOR="#CCFFCC">PC:</td>

<td WIDTH="50%" BGCOLOR="#CCFFCC"><b><tt>08 56 00 00</tt></b></td>

<td WIDTH="50%" BGCOLOR="#CCFFCC"><i>Acknowledgement of data</i></td>
</tr>
</table>

<p>The following figure demonstrates byte ordering of the pixels if the
bitmap is in a 3840-element array data[]:
<p><img SRC="graphics/scrnshot.gif" ALT="[pixel grid diagram]" BORDER=0 height=467 width=776 align=BOTTOM>
<p>Remark: contrary to the TI92/92+ calculator, only the 160x100 upper
rectangle is visible on the TI89. The remaining bytes are usable (in assembler
for instance) but they are not visible. So, a clipping is necessary once
the screenshot have been got.
<p>Note that this format is different from the standard Windows bitmap
format, which specifies a value of 1 if the pixel is light and bottom-to-top
row order.
<br>&nbsp;
<table BORDER=0 CELLSPACING=0 WIDTH="100%" >
<tr>
<td WIDTH="32%">
<center><a href="packet.html"><img SRC="graphics/prevpage.gif" ALT="[previous page]" BORDER=2 height=32 width=32 align=BOTTOM></a>
<br><a href="packet.html">Packet Formats</a></center>
</td>

<td WIDTH="34%">
<center><a href="index.html"><img SRC="graphics/home.gif" ALT="[home]" BORDER=2 height=32 width=32 align=BOTTOM></a>
<br><a href="index.html">Table of Contents</a></center>
</td>

<td WIDTH="34%">
<center><a href="manual.html"><img SRC="graphics/nextpage.gif" ALT="[next page]" BORDER=2 height=32 width=32 align=BOTTOM></a>
<br><a href="manual.html">Manual Transfers</a></center>
</td>
</tr>
</table>

<hr ALIGN="CENTER"><i>Site maintained by Romain Li&eacute;vin (<a href="mailto:roms@lpg.ticalc.org">roms@lpg.ticalc.org</a>)
and Tim Singer (<a href="mailto:tsinger@gladstone.uoregon.edu">tsinger@gladstone.uoregon.edu</a>)</i>
</body>
</html>
